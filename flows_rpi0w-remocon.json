[{"id":"438ab136.239fa","type":"tab","label":"MQTT:beebotte→温度,湿度,気圧","disabled":false,"info":""},{"id":"ced38e95.976a3","type":"tab","label":"Alexa Home → LIRC","disabled":false,"info":""},{"id":"52e5256c.6ed94c","type":"tab","label":"Alexaの応答","disabled":false,"info":""},{"id":"c5e85a5f.147a68","type":"tab","label":"Alexa Local → LIRC","disabled":false,"info":""},{"id":"aa0904da.d689a8","type":"subflow","name":"コマンド分岐","info":"Alexa Localからの入力を分岐","category":"","in":[{"x":40,"y":80,"wires":[{"id":"71e4e010.c1042"}]}],"out":[{"x":660,"y":40,"wires":[{"id":"85ba3b33.f92e98","port":0}]},{"x":660,"y":80,"wires":[{"id":"3036e890.e6cef8","port":0}]},{"x":660,"y":120,"wires":[{"id":"6ccc0fee.9dec9","port":0}]},{"x":660,"y":160,"wires":[{"id":"3f953001.cce33","port":0}]},{"x":660,"y":200,"wires":[{"id":"63dc37f7.d26098","port":0}]}],"inputLabels":["Alexa Localからのmsg"],"outputLabels":["on","off","up","down","1..100"]},{"id":"dfac1a83.a920b8","type":"subflow","name":"vol up/down","info":"# payloadに変化量\n\n  payload > 0: vol_up\n  \n  payload < 0: vol_down\n","category":"","in":[{"x":60,"y":60,"wires":[{"id":"13a3bd50.d3c2c3"}]}],"out":[{"x":1000,"y":140,"wires":[{"id":"8acd7c46.8e4c2","port":0}]}],"inputLabels":["変化量"],"outputLabels":["vol_up/down"]},{"id":"4c94e976.9a29e8","type":"alexa-home-conf","z":"","username":"ytani"},{"id":"ea87affe.5cedd","type":"lirc-controller","z":"","name":"SEND_ONCE"},{"id":"189d44fe.8ba0db","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED ダッシュボード","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"YYYY/MM/DD","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"38f3d975.e68376","type":"ui_group","z":"","name":"エアコン","tab":"dc8ccc91.6ab8c","order":2,"disp":true,"width":"3","collapse":false},{"id":"dc8ccc91.6ab8c","type":"ui_tab","z":"","name":"家電コントロール","icon":"dashboard","order":1},{"id":"cfd31d5a.7257b","type":"ui_group","z":"","name":"Dyson Fan","tab":"dc8ccc91.6ab8c","order":1,"disp":true,"width":"3","collapse":false},{"id":"3b7e7ae0.0e3136","type":"mqtt-broker","z":"","name":"","broker":"mqtt.beebotte.com","port":"8883","tls":"9085588b.f27808","clientid":"","usetls":true,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"9085588b.f27808","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"mqtt.beebotte.com.pem","servername":"","verifyservercert":true},{"id":"51347206.f77d3c","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40217","acknoledge":false,"name":"ダイソン","topic":"","x":88,"y":79,"wires":[["5901fca9.b71544","1864c7e.9908138","da7babf3.521be8"]]},{"id":"211ddf02.ddf41","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"power0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":594,"y":71,"wires":[["ee7e924f.e4bd5"]]},{"id":"6faa1423.27f5ac","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"power1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":113,"wires":[["ee7e924f.e4bd5"]]},{"id":"df02b123.8bb7d","type":"change","z":"ced38e95.976a3","name":"Temp Up","rules":[{"t":"set","p":"payload","pt":"msg","to":"temp_up0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":602,"y":156,"wires":[["ee7e924f.e4bd5"]]},{"id":"27f26fa4.e6e2e","type":"change","z":"ced38e95.976a3","name":"Temp Down","rules":[{"t":"set","p":"payload","pt":"msg","to":"temp_down0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":609,"y":202,"wires":[["ee7e924f.e4bd5"]]},{"id":"ee7e924f.e4bd5","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"dyson","output":"1","x":772,"y":144,"wires":[]},{"id":"93df164f.4a59d8","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40588","acknoledge":true,"name":"ボール ランプ","topic":"","x":94,"y":318,"wires":[["ffbf92d0.a377a","4e0fb9cf.e2c5f8"]]},{"id":"ffbf92d0.a377a","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementPercentageRequest","vt":"str"},{"t":"eq","v":"DecrementPercentageRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":368,"y":321,"wires":[["24bf69fa.807226"],["4c0b34ab.4ce5dc"],["24bf69fa.807226"],["4c0b34ab.4ce5dc"]]},{"id":"a36a2e50.01314","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"lamp","output":"1","x":775,"y":323,"wires":[]},{"id":"24bf69fa.807226","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":568,"y":306,"wires":[["a36a2e50.01314"]]},{"id":"4c0b34ab.4ce5dc","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":347,"wires":[["a36a2e50.01314"]]},{"id":"5901fca9.b71544","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":378,"y":91,"wires":[["211ddf02.ddf41"],["6faa1423.27f5ac"],["df02b123.8bb7d"],["27f26fa4.e6e2e"]]},{"id":"1864c7e.9908138","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":194,"y":141,"wires":[]},{"id":"e67b4c26.72eda","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40923","acknoledge":true,"name":"スマートエアコン","topic":"","x":113,"y":450,"wires":[["417109b7.0299a8","65ded331.1743ac"]]},{"id":"417109b7.0299a8","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":369,"y":451,"wires":[["9bb6028a.0342d"],["d6da71a5.5436a"],["19d97a98.3c3e85"],["19d97a98.3c3e85"]]},{"id":"2f7bf29a.7718ce","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"aircon","output":"1","x":770,"y":458,"wires":[]},{"id":"9bb6028a.0342d","type":"change","z":"ced38e95.976a3","name":"ON Hot 24℃","rules":[{"t":"set","p":"payload","pt":"msg","to":"on_hot_24","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":430,"wires":[["2f7bf29a.7718ce"]]},{"id":"d6da71a5.5436a","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":573,"y":473,"wires":[["2f7bf29a.7718ce"]]},{"id":"868c0032.a9565","type":"ui_button","z":"ced38e95.976a3","name":"","group":"38f3d975.e68376","order":1,"width":0,"height":0,"passthru":false,"label":"Off","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":130,"y":555,"wires":[["d6da71a5.5436a","bbf4f8b8.83dbd8"]]},{"id":"491e8817.c276b8","type":"ui_switch","z":"ced38e95.976a3","name":"Dyson Fan Power","label":"Power","tooltip":"","group":"cfd31d5a.7257b","order":1,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":148,"y":195,"wires":[["f674b3b6.2fd9","9677357.1513ac8"]]},{"id":"f674b3b6.2fd9","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"false","repair":false,"outputs":2,"x":364,"y":191,"wires":[["211ddf02.ddf41"],["6faa1423.27f5ac"]]},{"id":"d02644b8.bfa428","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41011","acknoledge":true,"name":"スマート音量","topic":"","x":95,"y":678,"wires":[["bc91466e.cf2cc8","cb2e6be0.82f938"]]},{"id":"bc91466e.cf2cc8","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":362,"y":679,"wires":[["9c0e26ef.6b1ab8"],["51d46508.cfa2fc"],["9addf7f8.9f0e08"]]},{"id":"3be10544.3553fa","type":"lirc-out","z":"ced38e95.976a3","name":"LG TV:Volume","controller":"ea87affe.5cedd","device":"lg_tv","output":"1","x":759,"y":687,"wires":[]},{"id":"9c0e26ef.6b1ab8","type":"change","z":"ced38e95.976a3","name":"Vol Up","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":668,"wires":[["3be10544.3553fa"]]},{"id":"51d46508.cfa2fc","type":"change","z":"ced38e95.976a3","name":"Vol Down","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":709,"wires":[["3be10544.3553fa"]]},{"id":"19d97a98.3c3e85","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":612,"y":514,"wires":[]},{"id":"bc2667b2.cbc5b8","type":"mqtt in","z":"438ab136.239fa","name":"","topic":"env1/data","qos":"1","broker":"3b7e7ae0.0e3136","x":84,"y":33,"wires":[["915ce6bb.eb6c58","7372f1e6.0068"]]},{"id":"dc755e8d.9c575","type":"mqtt out","z":"438ab136.239fa","name":"","topic":"env1/data","qos":"","retain":"","broker":"3b7e7ae0.0e3136","x":260,"y":620,"wires":[]},{"id":"1097bae2.78cfc5","type":"inject","z":"438ab136.239fa","name":"dummy data","topic":"env1/data","payload":"{\"data\":{\"temp\":23.4,\"humidity\":45.6,\"pressure\":1005},\"ts\":12345678,\"ispublic\":true}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":155,"y":561,"wires":[["dc755e8d.9c575","b9209d2.83c566"]]},{"id":"915ce6bb.eb6c58","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","x":250,"y":32,"wires":[]},{"id":"7372f1e6.0068","type":"json","z":"438ab136.239fa","name":"","property":"payload","action":"","pretty":false,"x":118,"y":94,"wires":[["84c2e4ce.544248","1529e9c6.1de436"]]},{"id":"84c2e4ce.544248","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":302,"y":95,"wires":[]},{"id":"1529e9c6.1de436","type":"split","z":"438ab136.239fa","name":"要素分解","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":141,"y":140,"wires":[["c7b652a2.c8fdc"]]},{"id":"84d0614d.00e4a","type":"switch","z":"438ab136.239fa","name":"キーにより分岐","property":"parts.key","propertyType":"msg","rules":[{"t":"eq","v":"temp","vt":"str"},{"t":"eq","v":"humidity","vt":"str"},{"t":"eq","v":"pressure","vt":"str"},{"t":"eq","v":"ts","vt":"str"},{"t":"eq","v":"ispublic","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":6,"x":212,"y":273,"wires":[["e1e3f132.ed6ad","e10d1646.559008"],["cb8affda.5f69f"],["abbba2e3.2f208"],["e2fbcea3.3e6e9"],["6cee7a16.1edf24"],["9d6c4a06.13c9a8"]]},{"id":"e2fbcea3.3e6e9","type":"debug","z":"438ab136.239fa","name":"ts","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":654,"y":244,"wires":[]},{"id":"6cee7a16.1edf24","type":"debug","z":"438ab136.239fa","name":"ispublic","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":664,"y":309,"wires":[]},{"id":"9d6c4a06.13c9a8","type":"debug","z":"438ab136.239fa","name":"その他","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":662,"y":373,"wires":[]},{"id":"b9209d2.83c566","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","x":335,"y":559,"wires":[]},{"id":"c7b652a2.c8fdc","type":"switch","z":"438ab136.239fa","name":"タイプチェック","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"object","vt":"object"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":178,"y":199,"wires":[["1529e9c6.1de436"],["84d0614d.00e4a","95705542.8ee408"]]},{"id":"91eb3aa.59f77c8","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41178","acknoledge":true,"name":"HDMI","topic":"","x":80,"y":841,"wires":[["78721cce.b7e654","28d5da93.f739e6"]]},{"id":"14d4d60f.496e1a","type":"change","z":"ced38e95.976a3","name":"Next","rules":[{"t":"set","p":"payload","pt":"msg","to":"down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":829,"wires":[["cbf2ddc1.ef60a"]]},{"id":"78721cce.b7e654","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":360,"y":842,"wires":[["14d4d60f.496e1a"],["a6d4f9ff.d07458"],["745c18d2.bbde38"]]},{"id":"a6d4f9ff.d07458","type":"change","z":"ced38e95.976a3","name":"Previous","rules":[{"t":"set","p":"payload","pt":"msg","to":"up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":579,"y":872,"wires":[["cbf2ddc1.ef60a"]]},{"id":"cbf2ddc1.ef60a","type":"lirc-out","z":"ced38e95.976a3","name":"HDMI Switch","controller":"ea87affe.5cedd","device":"hdmi","output":"1","x":754,"y":837,"wires":[]},{"id":"549f29a8.c55368","type":"http request","z":"438ab136.239fa","name":"IFTTTトリガー","method":"POST","ret":"txt","url":"https://maker.ifttt.com/trigger/env1/with/key/bHTyVKw8J52oaZ-bMV18hP","tls":"","x":465,"y":510,"wires":[["b6d344a3.d57868"]]},{"id":"b6d344a3.d57868","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":675,"y":509,"wires":[]},{"id":"3a606efe.d58422","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":681,"y":440,"wires":[]},{"id":"2e1e7790.806148","type":"join","z":"438ab136.239fa","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":445,"y":414,"wires":[["549f29a8.c55368","3a606efe.d58422"]]},{"id":"e1e3f132.ed6ad","type":"change","z":"438ab136.239fa","name":"{\"value1: 温度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":292,"y":363,"wires":[["2e1e7790.806148"]]},{"id":"cb8affda.5f69f","type":"change","z":"438ab136.239fa","name":"{\"value2\": 湿度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":291,"y":407,"wires":[["2e1e7790.806148"]]},{"id":"abbba2e3.2f208","type":"change","z":"438ab136.239fa","name":"{\"value3\": 気圧}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":292,"y":448,"wires":[["2e1e7790.806148"]]},{"id":"95705542.8ee408","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":395,"y":189,"wires":[]},{"id":"4e0fb9cf.e2c5f8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":205,"y":379,"wires":[]},{"id":"65ded331.1743ac","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":215,"y":503,"wires":[]},{"id":"cb2e6be0.82f938","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":215,"y":734,"wires":[]},{"id":"28d5da93.f739e6","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":217,"y":895,"wires":[]},{"id":"9677357.1513ac8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":200,"y":242,"wires":[]},{"id":"bbf4f8b8.83dbd8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":224,"y":606,"wires":[]},{"id":"745c18d2.bbde38","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":608,"y":917,"wires":[]},{"id":"9addf7f8.9f0e08","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":612,"y":752,"wires":[]},{"id":"e10d1646.559008","type":"link out","z":"438ab136.239fa","name":"温度","links":["81e324e7.361f88"],"x":655,"y":183,"wires":[]},{"id":"f2718f4.875aa7","type":"alexa-home-resp","z":"52e5256c.6ed94c","x":420,"y":340,"wires":[]},{"id":"81e324e7.361f88","type":"link in","z":"52e5256c.6ed94c","name":"温度","links":["e10d1646.559008"],"x":55,"y":160,"wires":[["5ad48ba8.c70d64","a8e3d2e7.ff3c7"]]},{"id":"5ad48ba8.c70d64","type":"change","z":"52e5256c.6ed94c","name":"{\"value\": 温度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":180,"y":220,"wires":[["4aeba572.6e1e6c"]]},{"id":"a8e3d2e7.ff3c7","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":180,"y":160,"wires":[]},{"id":"4aeba572.6e1e6c","type":"join","z":"52e5256c.6ed94c","name":"温度の待ち合わせ","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts.key","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":410,"y":220,"wires":[["75a9472f.ccda08","76ec2356.9817bc","dbb1976f.138f18"]]},{"id":"75a9472f.ccda08","type":"change","z":"52e5256c.6ed94c","name":"Alexa応答の作成","rules":[{"t":"delete","p":"payload.command","pt":"msg"},{"t":"move","p":"payload","pt":"msg","to":"extra.targetTemperature","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":410,"y":280,"wires":[["b11d691d.0e0c88","f2718f4.875aa7","69244b52.161934"]]},{"id":"b11d691d.0e0c88","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"extra","x":630,"y":340,"wires":[]},{"id":"6cf6a551.18db7c","type":"change","z":"52e5256c.6ed94c","name":"{\"command\": payload}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"command","tot":"str"},{"t":"move","p":"command","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":100,"wires":[["4aeba572.6e1e6c"]]},{"id":"76ec2356.9817bc","type":"change","z":"52e5256c.6ed94c","name":"payload=温度","rules":[{"t":"move","p":"payload.value","pt":"msg","to":"value","tot":"msg"},{"t":"move","p":"value","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":420,"y":160,"wires":[["5ad48ba8.c70d64","1a2a2201.4727fe"]]},{"id":"1a2a2201.4727fe","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":640,"y":160,"wires":[]},{"id":"dbb1976f.138f18","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":640,"y":220,"wires":[]},{"id":"69244b52.161934","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":640,"y":280,"wires":[]},{"id":"da7babf3.521be8","type":"link out","z":"ced38e95.976a3","name":"command","links":["1999d4d7.4483fb"],"x":231,"y":30,"wires":[]},{"id":"1999d4d7.4483fb","type":"link in","z":"52e5256c.6ed94c","name":"command","links":["da7babf3.521be8"],"x":55,"y":40,"wires":[["6cf6a551.18db7c","400faf69.e882b"]]},{"id":"400faf69.e882b","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":190,"y":40,"wires":[]},{"id":"85d9fe0e.cef39","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41427","acknoledge":true,"name":"照明 シャープ 常夜灯","topic":"","x":127,"y":1005,"wires":[["2c84cc91.42e0b4"]]},{"id":"2c84cc91.42e0b4","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementPercentageRequest","vt":"str"},{"t":"eq","v":"DecrementPercentageRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":371,"y":1007,"wires":[["3f7f38c4.4e8a38"],["77cd1bc1.df8724"],["3f7f38c4.4e8a38"],["77cd1bc1.df8724"]]},{"id":"3f7f38c4.4e8a38","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":995,"wires":[["dd921b2a.62a6b8"]]},{"id":"77cd1bc1.df8724","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":593,"y":1036,"wires":[["dd921b2a.62a6b8"]]},{"id":"dd921b2a.62a6b8","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"nightlight","output":"1","x":757,"y":997,"wires":[]},{"id":"d1d2415f.b87ff","type":"alexa-local","z":"c5e85a5f.147a68","devicename":"LGの音量","inputtrigger":false,"x":80,"y":340,"wires":[["85a8eafb.bc3728","5e8317a9.e7ee38","f8880cd.b21fff","9ab819ee.f20a88","83a48a95.19ca58","97694e98.ee534","1f852ff4.f2f1d"]]},{"id":"5c8b8fd1.22de1","type":"alexa-local","z":"c5e85a5f.147a68","devicename":"HDMI切替器","inputtrigger":false,"x":90,"y":40,"wires":[["75f72498.bf383c","4ac482c8.25b5cc","31dcf61e.acc29a","9ae2b3c4.5b128","ffcd6aa9.e72828","3cdb5f86.c261d","238b649d.41a6ac"]]},{"id":"75f72498.bf383c","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on","x":240,"y":140,"wires":[]},{"id":"4ac482c8.25b5cc","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":160,"y":100,"wires":[]},{"id":"31dcf61e.acc29a","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on_off_command","x":210,"y":240,"wires":[]},{"id":"9ae2b3c4.5b128","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"bri","x":260,"y":280,"wires":[]},{"id":"ffcd6aa9.e72828","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"change_direction","x":170,"y":200,"wires":[]},{"id":"c09c630a.035fa","type":"change","z":"c5e85a5f.147a68","name":"hdmi#","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.(\"hdmi\" & payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":180,"wires":[["5346f705.1584e8","7c51897e.9133a8"]]},{"id":"7c51897e.9133a8","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":960,"y":140,"wires":[]},{"id":"992ea28c.894e5","type":"change","z":"c5e85a5f.147a68","name":"down","rules":[{"t":"set","p":"payload","pt":"msg","to":"down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":588,"y":109,"wires":[["5346f705.1584e8","7c51897e.9133a8"]]},{"id":"442bccfd.91e6c4","type":"change","z":"c5e85a5f.147a68","name":"up","rules":[{"t":"set","p":"payload","pt":"msg","to":"up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":144,"wires":[["5346f705.1584e8","7c51897e.9133a8"]]},{"id":"5346f705.1584e8","type":"lirc-out","z":"c5e85a5f.147a68","name":"","controller":"ea87affe.5cedd","device":"hdmi","output":"1","x":930,"y":80,"wires":[],"inputLabels":["コマンド名"]},{"id":"c8550c1c.cd081","type":"change","z":"c5e85a5f.147a68","name":"pip_ok","rules":[{"t":"set","p":"payload","pt":"msg","to":"pip_ok","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":589,"y":72,"wires":[["7c51897e.9133a8","5346f705.1584e8"]]},{"id":"6b0f50fc.24372","type":"change","z":"c5e85a5f.147a68","name":"pip","rules":[{"t":"set","p":"payload","pt":"msg","to":"pip","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":588,"y":39,"wires":[["5346f705.1584e8","7c51897e.9133a8"]]},{"id":"5aedd61.7298a28","type":"change","z":"c5e85a5f.147a68","name":"hdmi#","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.(\"hdmi\" & $floor((payload / 10)))","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":587,"y":218,"wires":[["7c51897e.9133a8","5346f705.1584e8"]]},{"id":"d609a804.b9b358","type":"lirc-out","z":"c5e85a5f.147a68","name":"","controller":"ea87affe.5cedd","device":"lg2","output":"1","x":930,"y":360,"wires":[],"inputLabels":["コマンド名"]},{"id":"f8880cd.b21fff","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on","x":240,"y":440,"wires":[]},{"id":"85a8eafb.bc3728","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":160,"y":400,"wires":[]},{"id":"5e8317a9.e7ee38","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on_off_command","x":210,"y":540,"wires":[]},{"id":"97694e98.ee534","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"bri","x":260,"y":580,"wires":[]},{"id":"83a48a95.19ca58","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"change_direction","x":170,"y":500,"wires":[]},{"id":"3cdb5f86.c261d","type":"subflow:aa0904da.d689a8","z":"c5e85a5f.147a68","name":"","x":410,"y":80,"wires":[["6b0f50fc.24372","cf5dad04.1e645"],["c8550c1c.cd081","cf5dad04.1e645"],["992ea28c.894e5","cf5dad04.1e645"],["442bccfd.91e6c4","cf5dad04.1e645"],["13fdc6f9.0f19a9","cf5dad04.1e645"]]},{"id":"8499cd62.7965c","type":"switch","z":"aa0904da.d689a8","name":"change_direction","property":"change_direction","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"},{"t":"lt","v":"0","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":390,"y":160,"wires":[["6ccc0fee.9dec9"],["3f953001.cce33"],["63dc37f7.d26098"]]},{"id":"71e4e010.c1042","type":"switch","z":"aa0904da.d689a8","name":"on_off_command","property":"on_off_command","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":170,"y":80,"wires":[["d96ff458.4bd718"],["8499cd62.7965c"]]},{"id":"d96ff458.4bd718","type":"switch","z":"aa0904da.d689a8","name":"on","property":"on","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":350,"y":60,"wires":[["85ba3b33.f92e98"],["3036e890.e6cef8"]]},{"id":"238b649d.41a6ac","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"device_name","x":320,"y":40,"wires":[]},{"id":"9ab819ee.f20a88","type":"subflow:aa0904da.d689a8","z":"c5e85a5f.147a68","name":"","x":410,"y":380,"wires":[["7ea054ba.f3b58c","fd19a2cf.27d6f"],["7ea054ba.f3b58c","fd19a2cf.27d6f"],["fdd1844b.acca78","fd19a2cf.27d6f"],["63c22f23.c918d","fd19a2cf.27d6f"],["c6b95bfa.fb6a98","fd19a2cf.27d6f"]]},{"id":"7ea054ba.f3b58c","type":"change","z":"c5e85a5f.147a68","name":"mute","rules":[{"t":"set","p":"payload","pt":"msg","to":"mute","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":340,"wires":[["d609a804.b9b358","928e5375.85fe7"]]},{"id":"928e5375.85fe7","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":960,"y":420,"wires":[]},{"id":"fdd1844b.acca78","type":"change","z":"c5e85a5f.147a68","name":"+7","rules":[{"t":"set","p":"payload","pt":"msg","to":"7","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":380,"wires":[["8b8a642f.5d16d8","109eadc5.4c02a2"]]},{"id":"e2691772.ec89d8","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"count","x":790,"y":480,"wires":[]},{"id":"13a3bd50.d3c2c3","type":"change","z":"dfac1a83.a920b8","name":"payload ==> msg.count","rules":[{"t":"set","p":"count","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":210,"y":60,"wires":[["bbd9943f.7e5ed8"]]},{"id":"bbd9943f.7e5ed8","type":"switch","z":"dfac1a83.a920b8","name":"up or down","property":"count","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"},{"t":"lt","v":"0","vt":"str"}],"checkall":"false","repair":false,"outputs":2,"x":150,"y":140,"wires":[["2e981c25.01c424"],["6dca42.bea2f5c"]]},{"id":"8759b85e.c030b8","type":"delay","z":"dfac1a83.a920b8","name":"","pauseType":"delay","timeout":"900","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":710,"y":140,"wires":[["8acd7c46.8e4c2"]]},{"id":"2e981c25.01c424","type":"change","z":"dfac1a83.a920b8","name":"vol_up","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":310,"y":120,"wires":[["f57153c.55c94b"]]},{"id":"8acd7c46.8e4c2","type":"change","z":"dfac1a83.a920b8","name":"msg.count--","rules":[{"t":"set","p":"count","pt":"msg","to":"msg.count-1","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":870,"y":140,"wires":[["f57153c.55c94b"]]},{"id":"6dca42.bea2f5c","type":"change","z":"dfac1a83.a920b8","name":"vol_down","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_down","tot":"str"},{"t":"set","p":"count","pt":"msg","to":"-count","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":320,"y":160,"wires":[["f57153c.55c94b"]]},{"id":"f57153c.55c94b","type":"switch","z":"dfac1a83.a920b8","name":"while msg.count > 0","property":"count","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":520,"y":140,"wires":[["8759b85e.c030b8"]]},{"id":"8b8a642f.5d16d8","type":"subflow:dfac1a83.a920b8","z":"c5e85a5f.147a68","name":"","x":760,"y":440,"wires":[["e2691772.ec89d8","928e5375.85fe7","d609a804.b9b358"]]},{"id":"63c22f23.c918d","type":"change","z":"c5e85a5f.147a68","name":"-10","rules":[{"t":"set","p":"payload","pt":"msg","to":"-10","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":420,"wires":[["8b8a642f.5d16d8","109eadc5.4c02a2"]]},{"id":"ca450ca2.ffe96","type":"change","z":"c5e85a5f.147a68","name":"-n","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.((payload-10)*-1)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":460,"wires":[["8b8a642f.5d16d8","109eadc5.4c02a2"]]},{"id":"d10cc1de.7101c","type":"change","z":"c5e85a5f.147a68","name":"+n","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.(payload-20)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":500,"wires":[["8b8a642f.5d16d8","109eadc5.4c02a2"]]},{"id":"1f852ff4.f2f1d","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"device_name","x":320,"y":340,"wires":[]},{"id":"3036e890.e6cef8","type":"change","z":"aa0904da.d689a8","name":"off","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":80,"wires":[[]]},{"id":"85ba3b33.f92e98","type":"change","z":"aa0904da.d689a8","name":"on","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":40,"wires":[[]]},{"id":"6ccc0fee.9dec9","type":"change","z":"aa0904da.d689a8","name":"up","rules":[{"t":"set","p":"payload","pt":"msg","to":"up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":120,"wires":[[]]},{"id":"3f953001.cce33","type":"change","z":"aa0904da.d689a8","name":"down","rules":[{"t":"set","p":"payload","pt":"msg","to":"down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":160,"wires":[[]]},{"id":"63dc37f7.d26098","type":"change","z":"aa0904da.d689a8","name":"0..100","rules":[{"t":"set","p":"payload","pt":"msg","to":"bri","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":200,"wires":[[]]},{"id":"13fdc6f9.0f19a9","type":"switch","z":"c5e85a5f.147a68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"1","vt":"num","v2":"4","v2t":"num"},{"t":"btwn","v":"10","vt":"num","v2":"49","v2t":"num"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":160,"wires":[["c09c630a.035fa"],["5aedd61.7298a28"]]},{"id":"c6b95bfa.fb6a98","type":"switch","z":"c5e85a5f.147a68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"btwn","v":"11","vt":"num","v2":"19","v2t":"num"},{"t":"btwn","v":"21","vt":"num","v2":"29","v2t":"num"}],"checkall":"true","repair":false,"outputs":2,"x":430,"y":460,"wires":[["ca450ca2.ffe96"],["d10cc1de.7101c"]]},{"id":"fd19a2cf.27d6f","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":480,"y":540,"wires":[]},{"id":"cf5dad04.1e645","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":480,"y":260,"wires":[]},{"id":"109eadc5.4c02a2","type":"debug","z":"c5e85a5f.147a68","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":760,"y":540,"wires":[]}]