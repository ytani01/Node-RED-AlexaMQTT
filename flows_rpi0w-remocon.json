[{"id":"ced38e95.976a3","type":"tab","label":"Alexa → LIRC","disabled":false,"info":""},{"id":"438ab136.239fa","type":"tab","label":"MQTT:beebotte→温度,湿度,気圧","disabled":false,"info":""},{"id":"52e5256c.6ed94c","type":"tab","label":"Alexaの応答","disabled":false,"info":""},{"id":"4c94e976.9a29e8","type":"alexa-home-conf","z":"","username":"ytani"},{"id":"ea87affe.5cedd","type":"lirc-controller","z":"","name":"SEND_ONCE"},{"id":"189d44fe.8ba0db","type":"ui_base","theme":{"name":"theme-light","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#0094CE","value":"#0094CE","edited":false},"page-titlebar-backgroundColor":{"value":"#0094CE","edited":false},"page-backgroundColor":{"value":"#fafafa","edited":false},"page-sidebar-backgroundColor":{"value":"#ffffff","edited":false},"group-textColor":{"value":"#1bbfff","edited":false},"group-borderColor":{"value":"#ffffff","edited":false},"group-backgroundColor":{"value":"#ffffff","edited":false},"widget-textColor":{"value":"#111111","edited":false},"widget-backgroundColor":{"value":"#0094ce","edited":false},"widget-borderColor":{"value":"#ffffff","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey"}},"site":{"name":"Node-RED ダッシュボード","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"YYYY/MM/DD","sizes":{"sx":48,"sy":48,"gx":6,"gy":6,"cx":6,"cy":6,"px":0,"py":0}}},{"id":"38f3d975.e68376","type":"ui_group","z":"","name":"エアコン","tab":"dc8ccc91.6ab8c","order":2,"disp":true,"width":"3","collapse":false},{"id":"dc8ccc91.6ab8c","type":"ui_tab","z":"","name":"家電コントロール","icon":"dashboard","order":1},{"id":"cfd31d5a.7257b","type":"ui_group","z":"","name":"Dyson Fan","tab":"dc8ccc91.6ab8c","order":1,"disp":true,"width":"3","collapse":false},{"id":"3b7e7ae0.0e3136","type":"mqtt-broker","z":"","name":"","broker":"mqtt.beebotte.com","port":"8883","tls":"9085588b.f27808","clientid":"","usetls":true,"compatmode":true,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"9085588b.f27808","type":"tls-config","z":"","name":"","cert":"","key":"","ca":"","certname":"","keyname":"","caname":"mqtt.beebotte.com.pem","servername":"","verifyservercert":true},{"id":"51347206.f77d3c","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40217","acknoledge":false,"name":"ダイソン","topic":"","x":88,"y":79,"wires":[["5901fca9.b71544","1864c7e.9908138","da7babf3.521be8"]]},{"id":"211ddf02.ddf41","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"power0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":594,"y":71,"wires":[["ee7e924f.e4bd5"]]},{"id":"6faa1423.27f5ac","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"power1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":113,"wires":[["ee7e924f.e4bd5"]]},{"id":"df02b123.8bb7d","type":"change","z":"ced38e95.976a3","name":"Temp Up","rules":[{"t":"set","p":"payload","pt":"msg","to":"temp_up0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":602,"y":156,"wires":[["ee7e924f.e4bd5"]]},{"id":"27f26fa4.e6e2e","type":"change","z":"ced38e95.976a3","name":"Temp Down","rules":[{"t":"set","p":"payload","pt":"msg","to":"temp_down0","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":609,"y":202,"wires":[["ee7e924f.e4bd5"]]},{"id":"ee7e924f.e4bd5","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"dyson","output":"1","x":772,"y":144,"wires":[]},{"id":"93df164f.4a59d8","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40588","acknoledge":true,"name":"ボール ランプ","topic":"","x":94,"y":318,"wires":[["ffbf92d0.a377a","4e0fb9cf.e2c5f8"]]},{"id":"ffbf92d0.a377a","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementPercentageRequest","vt":"str"},{"t":"eq","v":"DecrementPercentageRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":368,"y":321,"wires":[["24bf69fa.807226"],["4c0b34ab.4ce5dc"],["24bf69fa.807226"],["4c0b34ab.4ce5dc"]]},{"id":"a36a2e50.01314","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"lamp","output":"1","x":775,"y":323,"wires":[]},{"id":"24bf69fa.807226","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":568,"y":306,"wires":[["a36a2e50.01314"]]},{"id":"4c0b34ab.4ce5dc","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":347,"wires":[["a36a2e50.01314"]]},{"id":"5901fca9.b71544","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":378,"y":91,"wires":[["211ddf02.ddf41"],["6faa1423.27f5ac"],["df02b123.8bb7d"],["27f26fa4.e6e2e"]]},{"id":"1864c7e.9908138","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":194,"y":141,"wires":[]},{"id":"e67b4c26.72eda","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"40923","acknoledge":true,"name":"スマートエアコン","topic":"","x":113,"y":450,"wires":[["417109b7.0299a8","65ded331.1743ac"]]},{"id":"417109b7.0299a8","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":369,"y":451,"wires":[["9bb6028a.0342d"],["d6da71a5.5436a"],["19d97a98.3c3e85"],["19d97a98.3c3e85"]]},{"id":"2f7bf29a.7718ce","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"aircon","output":"1","x":769,"y":455,"wires":[]},{"id":"9bb6028a.0342d","type":"change","z":"ced38e95.976a3","name":"ON Hot 24℃","rules":[{"t":"set","p":"payload","pt":"msg","to":"on_hot_24","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":430,"wires":[["2f7bf29a.7718ce"]]},{"id":"d6da71a5.5436a","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":573,"y":473,"wires":[["2f7bf29a.7718ce"]]},{"id":"868c0032.a9565","type":"ui_button","z":"ced38e95.976a3","name":"","group":"38f3d975.e68376","order":1,"width":0,"height":0,"passthru":false,"label":"Off","tooltip":"","color":"","bgcolor":"","icon":"","payload":"off","payloadType":"str","topic":"","x":130,"y":555,"wires":[["d6da71a5.5436a","bbf4f8b8.83dbd8"]]},{"id":"491e8817.c276b8","type":"ui_switch","z":"ced38e95.976a3","name":"Dyson Fan Power","label":"Power","tooltip":"","group":"cfd31d5a.7257b","order":1,"width":0,"height":0,"passthru":true,"decouple":"false","topic":"","style":"","onvalue":"true","onvalueType":"bool","onicon":"","oncolor":"","offvalue":"false","offvalueType":"bool","officon":"","offcolor":"","x":148,"y":195,"wires":[["f674b3b6.2fd9","9677357.1513ac8"]]},{"id":"f674b3b6.2fd9","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"false","repair":false,"outputs":2,"x":364,"y":191,"wires":[["211ddf02.ddf41"],["6faa1423.27f5ac"]]},{"id":"d02644b8.bfa428","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41011","acknoledge":true,"name":"スマート音量","topic":"","x":95,"y":678,"wires":[["bc91466e.cf2cc8","cb2e6be0.82f938"]]},{"id":"bc91466e.cf2cc8","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"IncrementTargetTemperatureRequest","vt":"str"},{"t":"eq","v":"DecrementTargetTemperatureRequest","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":362,"y":679,"wires":[["9c0e26ef.6b1ab8"],["51d46508.cfa2fc"],["9addf7f8.9f0e08"]]},{"id":"3be10544.3553fa","type":"lirc-out","z":"ced38e95.976a3","name":"LG TV:Volume","controller":"ea87affe.5cedd","device":"lg_tv","output":"1","x":759,"y":687,"wires":[]},{"id":"9c0e26ef.6b1ab8","type":"change","z":"ced38e95.976a3","name":"Vol Up","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":668,"wires":[["3be10544.3553fa"]]},{"id":"51d46508.cfa2fc","type":"change","z":"ced38e95.976a3","name":"Vol Down","rules":[{"t":"set","p":"payload","pt":"msg","to":"vol_down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":709,"wires":[["3be10544.3553fa"]]},{"id":"19d97a98.3c3e85","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":612,"y":514,"wires":[]},{"id":"bc2667b2.cbc5b8","type":"mqtt in","z":"438ab136.239fa","name":"","topic":"env1/data","qos":"1","broker":"3b7e7ae0.0e3136","x":84,"y":33,"wires":[["915ce6bb.eb6c58","7372f1e6.0068"]]},{"id":"dc755e8d.9c575","type":"mqtt out","z":"438ab136.239fa","name":"","topic":"env1/data","qos":"","retain":"","broker":"3b7e7ae0.0e3136","x":232,"y":682,"wires":[]},{"id":"1097bae2.78cfc5","type":"inject","z":"438ab136.239fa","name":"dummy data","topic":"env1/data","payload":"{\"data\":{\"temp\":23.4,\"humidity\":45.6,\"pressure\":1005},\"ts\":12345678,\"ispublic\":true}","payloadType":"json","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":127,"y":623,"wires":[["dc755e8d.9c575","b9209d2.83c566"]]},{"id":"915ce6bb.eb6c58","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"true","x":250,"y":32,"wires":[]},{"id":"7372f1e6.0068","type":"json","z":"438ab136.239fa","name":"","property":"payload","action":"","pretty":false,"x":118,"y":94,"wires":[["84c2e4ce.544248","1529e9c6.1de436"]]},{"id":"84c2e4ce.544248","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":302,"y":95,"wires":[]},{"id":"1529e9c6.1de436","type":"split","z":"438ab136.239fa","name":"要素分解","splt":"\\n","spltType":"str","arraySplt":1,"arraySpltType":"len","stream":false,"addname":"","x":141,"y":140,"wires":[["c7b652a2.c8fdc"]]},{"id":"84d0614d.00e4a","type":"switch","z":"438ab136.239fa","name":"キーにより分岐","property":"parts.key","propertyType":"msg","rules":[{"t":"eq","v":"temp","vt":"str"},{"t":"eq","v":"humidity","vt":"str"},{"t":"eq","v":"pressure","vt":"str"},{"t":"eq","v":"ts","vt":"str"},{"t":"eq","v":"ispublic","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":6,"x":212,"y":273,"wires":[["e1e3f132.ed6ad","e10d1646.559008"],["cb8affda.5f69f"],["abbba2e3.2f208"],["e2fbcea3.3e6e9"],["6cee7a16.1edf24"],["9d6c4a06.13c9a8"]]},{"id":"e2fbcea3.3e6e9","type":"debug","z":"438ab136.239fa","name":"ts","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":654,"y":244,"wires":[]},{"id":"6cee7a16.1edf24","type":"debug","z":"438ab136.239fa","name":"ispublic","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":664,"y":309,"wires":[]},{"id":"9d6c4a06.13c9a8","type":"debug","z":"438ab136.239fa","name":"その他","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":662,"y":373,"wires":[]},{"id":"b9209d2.83c566","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":false,"tostatus":true,"complete":"payload","x":307,"y":621,"wires":[]},{"id":"c7b652a2.c8fdc","type":"switch","z":"438ab136.239fa","name":"タイプチェック","property":"payload","propertyType":"msg","rules":[{"t":"istype","v":"object","vt":"object"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":178,"y":199,"wires":[["1529e9c6.1de436"],["84d0614d.00e4a","95705542.8ee408"]]},{"id":"91eb3aa.59f77c8","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41178","acknoledge":true,"name":"HDMI","topic":"","x":80,"y":841,"wires":[["78721cce.b7e654","28d5da93.f739e6"]]},{"id":"14d4d60f.496e1a","type":"change","z":"ced38e95.976a3","name":"Next","rules":[{"t":"set","p":"payload","pt":"msg","to":"down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":570,"y":829,"wires":[["cbf2ddc1.ef60a"]]},{"id":"78721cce.b7e654","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":360,"y":842,"wires":[["14d4d60f.496e1a"],["a6d4f9ff.d07458"],["745c18d2.bbde38"]]},{"id":"a6d4f9ff.d07458","type":"change","z":"ced38e95.976a3","name":"Previous","rules":[{"t":"set","p":"payload","pt":"msg","to":"up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":579,"y":872,"wires":[["cbf2ddc1.ef60a"]]},{"id":"cbf2ddc1.ef60a","type":"lirc-out","z":"ced38e95.976a3","name":"HDMI Switch","controller":"ea87affe.5cedd","device":"hdmi","output":"1","x":754,"y":837,"wires":[]},{"id":"549f29a8.c55368","type":"http request","z":"438ab136.239fa","name":"IFTTTトリガー","method":"POST","ret":"txt","url":"https://maker.ifttt.com/trigger/env1/with/key/bHTyVKw8J52oaZ-bMV18hP","tls":"","x":465,"y":510,"wires":[["b6d344a3.d57868"]]},{"id":"b6d344a3.d57868","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":675,"y":509,"wires":[]},{"id":"3a606efe.d58422","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":681,"y":440,"wires":[]},{"id":"2e1e7790.806148","type":"join","z":"438ab136.239fa","name":"","mode":"auto","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":445,"y":414,"wires":[["549f29a8.c55368","3a606efe.d58422"]]},{"id":"e1e3f132.ed6ad","type":"change","z":"438ab136.239fa","name":"{\"value1: 温度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value1","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":292,"y":363,"wires":[["2e1e7790.806148"]]},{"id":"cb8affda.5f69f","type":"change","z":"438ab136.239fa","name":"{\"value2\": 湿度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value2","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":291,"y":407,"wires":[["2e1e7790.806148"]]},{"id":"abbba2e3.2f208","type":"change","z":"438ab136.239fa","name":"{\"value3\": 気圧}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value3","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":292,"y":448,"wires":[["2e1e7790.806148"]]},{"id":"95705542.8ee408","type":"debug","z":"438ab136.239fa","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":395,"y":189,"wires":[]},{"id":"4e0fb9cf.e2c5f8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":205,"y":379,"wires":[]},{"id":"65ded331.1743ac","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":215,"y":503,"wires":[]},{"id":"cb2e6be0.82f938","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":215,"y":734,"wires":[]},{"id":"28d5da93.f739e6","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":217,"y":895,"wires":[]},{"id":"9677357.1513ac8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":200,"y":242,"wires":[]},{"id":"bbf4f8b8.83dbd8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":224,"y":606,"wires":[]},{"id":"745c18d2.bbde38","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":608,"y":917,"wires":[]},{"id":"9addf7f8.9f0e08","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":612,"y":752,"wires":[]},{"id":"e10d1646.559008","type":"link out","z":"438ab136.239fa","name":"温度","links":["81e324e7.361f88"],"x":655,"y":183,"wires":[]},{"id":"f2718f4.875aa7","type":"alexa-home-resp","z":"52e5256c.6ed94c","x":523,"y":395,"wires":[]},{"id":"81e324e7.361f88","type":"link in","z":"52e5256c.6ed94c","name":"温度","links":["e10d1646.559008"],"x":54,"y":152,"wires":[["5ad48ba8.c70d64","a8e3d2e7.ff3c7"]]},{"id":"5ad48ba8.c70d64","type":"change","z":"52e5256c.6ed94c","name":"{\"value\": 温度}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":194,"y":217,"wires":[["4aeba572.6e1e6c"]]},{"id":"a8e3d2e7.ff3c7","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":186,"y":149,"wires":[]},{"id":"4aeba572.6e1e6c","type":"join","z":"52e5256c.6ed94c","name":"温度の待ち合わせ","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"parts.key","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":402,"y":221,"wires":[["75a9472f.ccda08","76ec2356.9817bc","dbb1976f.138f18"]]},{"id":"75a9472f.ccda08","type":"change","z":"52e5256c.6ed94c","name":"Alexa応答の作成","rules":[{"t":"delete","p":"payload.command","pt":"msg"},{"t":"move","p":"payload","pt":"msg","to":"extra.targetTemperature","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":430,"y":285,"wires":[["b11d691d.0e0c88","f2718f4.875aa7","69244b52.161934"]]},{"id":"b11d691d.0e0c88","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"extra","x":644,"y":334,"wires":[]},{"id":"6cf6a551.18db7c","type":"change","z":"52e5256c.6ed94c","name":"{\"command\": payload}","rules":[{"t":"set","p":"parts.key","pt":"msg","to":"command","tot":"str"},{"t":"move","p":"command","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":209,"y":99,"wires":[["4aeba572.6e1e6c"]]},{"id":"76ec2356.9817bc","type":"change","z":"52e5256c.6ed94c","name":"payload=温度","rules":[{"t":"move","p":"payload.value","pt":"msg","to":"value","tot":"msg"},{"t":"move","p":"value","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":442,"y":154,"wires":[["5ad48ba8.c70d64","1a2a2201.4727fe"]]},{"id":"1a2a2201.4727fe","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":651,"y":152,"wires":[]},{"id":"dbb1976f.138f18","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":664,"y":216,"wires":[]},{"id":"69244b52.161934","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":653,"y":276,"wires":[]},{"id":"da7babf3.521be8","type":"link out","z":"ced38e95.976a3","name":"command","links":["1999d4d7.4483fb"],"x":231,"y":30,"wires":[]},{"id":"1999d4d7.4483fb","type":"link in","z":"52e5256c.6ed94c","name":"command","links":["da7babf3.521be8"],"x":49,"y":43,"wires":[["6cf6a551.18db7c","400faf69.e882b"]]},{"id":"400faf69.e882b","type":"debug","z":"52e5256c.6ed94c","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"command","x":189,"y":38,"wires":[]},{"id":"85d9fe0e.cef39","type":"alexa-home","z":"ced38e95.976a3","conf":"4c94e976.9a29e8","device":"41427","acknoledge":true,"name":"照明 シャープ 常夜灯","topic":"","x":127,"y":1005,"wires":[["2c84cc91.42e0b4"]]},{"id":"2c84cc91.42e0b4","type":"switch","z":"ced38e95.976a3","name":"コマンド分岐","property":"command","propertyType":"msg","rules":[{"t":"eq","v":"TurnOnRequest","vt":"str"},{"t":"eq","v":"TurnOffRequest","vt":"str"},{"t":"eq","v":"IncrementPercentageRequest","vt":"str"},{"t":"eq","v":"DecrementPercentageRequest","vt":"str"}],"checkall":"false","repair":false,"outputs":4,"x":371,"y":1007,"wires":[["3f7f38c4.4e8a38"],["77cd1bc1.df8724"],["3f7f38c4.4e8a38"],["77cd1bc1.df8724"]]},{"id":"3f7f38c4.4e8a38","type":"change","z":"ced38e95.976a3","name":"ON","rules":[{"t":"set","p":"payload","pt":"msg","to":"on","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":995,"wires":[["dd921b2a.62a6b8"]]},{"id":"77cd1bc1.df8724","type":"change","z":"ced38e95.976a3","name":"OFF","rules":[{"t":"set","p":"payload","pt":"msg","to":"off","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":593,"y":1036,"wires":[["dd921b2a.62a6b8"]]},{"id":"dd921b2a.62a6b8","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"nightlight","output":"1","x":757,"y":997,"wires":[]},{"id":"8206311b.4c219","type":"alexa-local","z":"ced38e95.976a3","devicename":"天井のライト","inputtrigger":false,"x":114,"y":1534,"wires":[["be907417.ba03e8"]]},{"id":"be907417.ba03e8","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":169,"y":1596,"wires":[]},{"id":"4455672.a1d4d98","type":"alexa-local","z":"ced38e95.976a3","devicename":"HDMI切替器","inputtrigger":false,"x":91,"y":1168,"wires":[["629bd1b1.3ac1a","1914906f.01d96","edb508d1.f6c138","55874a3d.9c11a4","1f79c5fe.9459aa","6a59853c.e1937c","bdd412.932c9bf"]]},{"id":"629bd1b1.3ac1a","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on","x":382,"y":1378,"wires":[]},{"id":"1914906f.01d96","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":170,"y":1329,"wires":[]},{"id":"edb508d1.f6c138","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"on_off_command","x":168,"y":1379,"wires":[]},{"id":"55874a3d.9c11a4","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"bri","x":120,"y":1429,"wires":[]},{"id":"6a59853c.e1937c","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"change_direction","x":171,"y":1475,"wires":[]},{"id":"1f79c5fe.9459aa","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"bri_normalized","x":324,"y":1430,"wires":[]},{"id":"30a957db.bd0308","type":"switch","z":"ced38e95.976a3","name":"bri","property":"bri","propertyType":"msg","rules":[{"t":"btwn","v":"1","vt":"num","v2":"4","v2t":"num"},{"t":"btwn","v":"10","vt":"num","v2":"49","v2t":"num"},{"t":"btwn","v":"80","vt":"num","v2":"99","v2t":"num"},{"t":"btwn","v":"60","vt":"num","v2":"79","v2t":"num"},{"t":"else"}],"checkall":"false","repair":false,"outputs":5,"x":330,"y":1239,"wires":[["b03477e.a400788"],["2287e39f.13406c"],["bc9bca9b.f16308"],["40d3a484.e4ff5c"],["b1270a74.9f53a8"]]},{"id":"b03477e.a400788","type":"change","z":"ced38e95.976a3","name":"hdmi#","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.(\"hdmi\" & bri)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":593,"y":1241,"wires":[["b48aa91d.d14288","f5b9b026.ec793"]]},{"id":"f5b9b026.ec793","type":"debug","z":"ced38e95.976a3","name":"","active":true,"tosidebar":true,"console":true,"tostatus":true,"complete":"payload","x":773,"y":1178,"wires":[]},{"id":"f97b7d1.479568","type":"switch","z":"ced38e95.976a3","name":"change_direction","property":"change_direction","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"str"},{"t":"lt","v":"0","vt":"str"},{"t":"else"}],"checkall":"false","repair":false,"outputs":3,"x":316,"y":1165,"wires":[["bc9bca9b.f16308"],["40d3a484.e4ff5c"],["30a957db.bd0308"]]},{"id":"bc9bca9b.f16308","type":"change","z":"ced38e95.976a3","name":"down","rules":[{"t":"set","p":"payload","pt":"msg","to":"down","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":1170,"wires":[["b48aa91d.d14288","f5b9b026.ec793"]]},{"id":"40d3a484.e4ff5c","type":"change","z":"ced38e95.976a3","name":"up","rules":[{"t":"set","p":"payload","pt":"msg","to":"up","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":592,"y":1205,"wires":[["b48aa91d.d14288","f5b9b026.ec793"]]},{"id":"bdd412.932c9bf","type":"switch","z":"ced38e95.976a3","name":"on_off_command","property":"on_off_command","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":247,"y":1107,"wires":[["3cc6bf71.56a6d"],["f97b7d1.479568"]]},{"id":"b48aa91d.d14288","type":"lirc-out","z":"ced38e95.976a3","name":"","controller":"ea87affe.5cedd","device":"hdmi","output":"1","x":743,"y":1121,"wires":[]},{"id":"7e188291.fd8c4c","type":"change","z":"ced38e95.976a3","name":"pip_ok","rules":[{"t":"set","p":"payload","pt":"msg","to":"pip_ok","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":592,"y":1133,"wires":[["f5b9b026.ec793","b48aa91d.d14288"]]},{"id":"3cc6bf71.56a6d","type":"switch","z":"ced38e95.976a3","name":"on","property":"on","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":433,"y":1101,"wires":[["b1270a74.9f53a8"],["7e188291.fd8c4c"]]},{"id":"b1270a74.9f53a8","type":"change","z":"ced38e95.976a3","name":"pip","rules":[{"t":"set","p":"payload","pt":"msg","to":"pip","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":591,"y":1100,"wires":[["b48aa91d.d14288","f5b9b026.ec793"]]},{"id":"2287e39f.13406c","type":"change","z":"ced38e95.976a3","name":"hdmi#","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.(\"hdmi\" & $floor((bri / 10)))","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":590,"y":1279,"wires":[["f5b9b026.ec793","b48aa91d.d14288"]]}]